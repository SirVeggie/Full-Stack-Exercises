{"version":3,"sources":["Form.tsx","Search.tsx","Numbers.tsx","Server.tsx","Notification.tsx","App.tsx","index.tsx"],"names":["Form","update","persons","setNotif","useState","newName","setNewName","newNumber","setNewNumber","onSubmit","event","newID","length","id","preventDefault","person","name","number","p","type","msg","find","x","checkValidity","value","onChange","target","align","Search","setValue","Numbers","numbers","search","del","filter","toLowerCase","includes","map","style","margin","onClick","baseUrl","a","axios","post","delete","get","then","data","put","ex","Add","Delete","All","Replace","error","success","Success","message","Error","Display","alert","App","defaultError","setPersons","setSearch","notification","setTimeout","useEffect","Server","Notification","found","catch","window","confirm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.58f91b3f.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\nfunction Form({ update, persons, setNotif }: { persons: Person[], update: (value: Person) => void, setNotif: (alert: Alert) => void; }) {\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n\n  const submit = (event: any) => {\n    const newID = persons[persons.length - 1].id + 1;\n    event.preventDefault();\n    const person: Person = { id: newID, name: newName, number: newNumber };\n\n    if (checkValidity(person, persons, setNotif))\n      update(person);\n\n    setNewName('');\n    setNewNumber('');\n  };\n\n  return (\n    <div>\n      <form onSubmit={submit}>\n        <table>\n          <tbody>\n            <tr>\n              <td>Name</td>\n              <td><input value={newName} onChange={event => setNewName(event.target.value)} /></td>\n            </tr>\n            <tr>\n              <td>Number</td>\n              <td><input value={newNumber} onChange={event => setNewNumber(event.target.value)} /></td>\n            </tr>\n            <tr>\n              <td></td>\n              <td align='right'><button type='submit'>Add</button></td>\n            </tr>\n          </tbody>\n        </table>\n      </form>\n    </div>\n  );\n}\n\nfunction checkValidity(p: Person, persons: Person[], setNotif: (alert: Alert) => void) {\n  if (p.name === '' || p.number === '') {\n    setNotif({ type: 'error', msg: 'Blanks are not allowed' });\n    return false;\n  }\n  \n  if (persons.find(x => x.number === p.number)) {\n    setNotif({ type: 'error', msg: `Number '${p.number}' already exists in the phonebook` });\n    return false;\n  }\n\n  return true;\n};\n\nexport default Form;","import React, { useState } from 'react';\n\nfunction Search({ update }: { update: (s: string) => void; }) {\n  const [value, setValue] = useState('');\n  const submit = (event: any) => {\n    event.preventDefault();\n    update(value);\n    setValue('');\n  };\n\n  return (\n    <div>\n      <form onSubmit={submit}>\n        Search by name <input value={value} onChange={event => setValue(event.target.value)} />\n        <button type='submit'>Search</button>\n      </form>\n    </div>\n  );\n}\n\nexport default Search;","import React from 'react';\n\nfunction Numbers({ numbers, search, del }: { numbers: Person[], search: string, del: (person: Person) => void; }) {\n  const filter = (x: Person) => x.name.toLowerCase().includes(search.toLowerCase());\n  const mapper = (x: Person) => (\n    <p style={{ margin: 0 }} key={x.name}>\n      {x.name} {x.number} <button onClick={() => del(x)}>delete</button>\n    </p>\n  );\n\n  return (\n    <div>\n      {numbers.filter(filter).map(mapper)}\n    </div>\n  );\n}\n\nexport default Numbers;","import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nasync function Add(person: Person) {\n  return axios.post(baseUrl, person);\n}\n\nasync function Delete(id: number) {\n  return axios.delete(baseUrl + '/' + id);\n}\n\nasync function All() {\n  return axios.get(baseUrl).then(x => x.data);\n}\n\nasync function Replace(person: Person) {\n  return axios.put(baseUrl + '/' + person.id, person);\n}\n\nconst ex = { Add, Delete, All, Replace };\nexport default ex;","import React from 'react';\n\nconst error: React.CSSProperties = {\n  'color': 'red',\n  'background': 'lightgrey',\n  'fontSize': '20px',\n  'borderStyle': 'solid',\n  'borderRadius': '5px',\n  'padding': '10px',\n  'marginBottom': '10px'\n};\n\nconst success: React.CSSProperties = {\n  'color': 'green',\n  'background': 'lightgrey',\n  'fontSize': '20px',\n  'borderStyle': 'solid',\n  'borderRadius': '5px',\n  'padding': '10px',\n  'marginBottom': '10px'\n};\n\nfunction Display(alert: Alert) {\n  return alert.type === 'success' ? Success(alert.msg) : Error(alert.msg);\n}\n\nfunction Success(message: string) {\n  return <p style={success}>{message}</p>;\n}\n\nfunction Error(message: string) {\n  return <p style={error}>{message}</p>;\n}\n\nconst ex = { Display, Success, Error };\nexport default ex;","import React, { useEffect, useState } from 'react';\nimport Form from './Form';\nimport Search from './Search';\nimport Numbers from './Numbers';\nimport Server from './Server';\nimport Notification from './Notification';\n\nfunction App() {\n  const init: Person[] = [];\n  const defaultError: Alert = { type: 'success', msg: '' };\n  const [persons, setPersons] = useState(init);\n  const [search, setSearch] = useState('');\n  const [notification, setNotif] = useState(defaultError);\n\n  const del = (person: Person) => {\n    if (!window.confirm('Delete ' + persons.find(x => x.id === person.id)?.name))\n      return;\n    Server.Delete(person.id).then(() => setPersons(persons.filter(x => x.id !== person.id)))\n      .catch(() => {\n        setNotif({ type: 'error', msg: 'Information of ' + person.name + ' has already been removed' });\n        Server.All().then(x => setPersons(x));\n      });\n  };\n\n  const update = (person: Person) => {\n    let found = persons.find(x => x.name === person.name);\n\n    if (!found) {\n      Server.Add(person).then(() => setPersons([...persons, person]))\n        .catch(() => setNotif({ type: 'error', msg: 'Server out of sync, reloading' }));\n      setNotif({ type: 'success', msg: 'Added ' + person.name + ' succesfully' });\n      Server.All().then(x => setPersons(x));\n      return;\n    }\n\n    if (!window.confirm(person.name + ' already exists, replace the old number?'))\n      return;\n    let p: Person = found;\n    p.number = person.number;\n    \n    Server.Replace(found).then(() => {\n      setPersons(persons.map(x => x.id !== p.id ? x : p));\n      setNotif({ type: 'success', msg: 'Modified ' + person.name + ' succesfully' });\n    }).catch(() => {\n      setNotif({ type: 'error', msg: 'Information of ' + person.name + ' has already been removed' });\n      Server.All().then(x => setPersons(x));\n    });\n  };\n\n  if (notification.msg !== '') {\n    setTimeout(() => {\n      setNotif(defaultError);\n    }, 2000);\n  }\n\n  useEffect(() => {\n    Server.All().then(x => setPersons(x));\n  }, []);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Search update={x => setSearch(x)} />\n      <h3>Add a new number</h3>\n      {notification.msg !== '' ? Notification.Display(notification) : ''}\n      <Form update={update} persons={persons} setNotif={setNotif} />\n      <h3>Numbers</h3>\n      <Numbers numbers={persons} search={search} del={del} />\n    </div>\n  );\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}