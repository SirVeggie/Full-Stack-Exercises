(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(18),c=n.n(r),u=n(19),i=n(3),a=n(1),o=n(0);var s=function(e){var t=e.update,n=e.persons,r=e.setNotif,c=Object(a.useState)(""),u=Object(i.a)(c,2),s=u[0],d=u[1],l=Object(a.useState)(""),b=Object(i.a)(l,2),f=b[0],p=b[1];return Object(o.jsx)("div",{children:Object(o.jsx)("form",{onSubmit:function(e){var c=n[n.length-1].id+1;e.preventDefault();var u={id:c,name:s,number:f};(function(e,t,n){if(""===e.name||""===e.number)return n({type:"error",msg:"Blanks are not allowed"}),!1;if(t.find((function(t){return t.number===e.number})))return n({type:"error",msg:"Number '".concat(e.number,"' already exists in the phonebook")}),!1;return!0})(u,n,r)&&t(u),d(""),p("")},children:Object(o.jsx)("table",{children:Object(o.jsxs)("tbody",{children:[Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:"Name"}),Object(o.jsx)("td",{children:Object(o.jsx)("input",{value:s,onChange:function(e){return d(e.target.value)}})})]}),Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:"Number"}),Object(o.jsx)("td",{children:Object(o.jsx)("input",{value:f,onChange:function(e){return p(e.target.value)}})})]}),Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{}),Object(o.jsx)("td",{align:"right",children:Object(o.jsx)("button",{type:"submit",children:"Add"})})]})]})})})})};var d=function(e){var t=e.update,n=Object(a.useState)(""),r=Object(i.a)(n,2),c=r[0],u=r[1];return Object(o.jsx)("div",{children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(c),u("")},children:["Search by name ",Object(o.jsx)("input",{value:c,onChange:function(e){return u(e.target.value)}}),Object(o.jsx)("button",{type:"submit",children:"Search"})]})})};var l=function(e){var t=e.numbers,n=e.search,r=e.del;return Object(o.jsx)("div",{children:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(o.jsxs)("p",{style:{margin:0},children:[e.name," ",e.number," ",Object(o.jsx)("button",{onClick:function(){return r(e)},children:"delete"})]},e.name)}))})},b=n(4),f=n.n(b),p=n(6),j=n(7),h=n.n(j),m="/api/persons";function O(){return(O=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.post(m,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.delete(m+"/"+t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.get(m).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.put(m+"/"+t.id,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g={Add:function(e){return O.apply(this,arguments)},Delete:function(e){return x.apply(this,arguments)},All:function(){return v.apply(this,arguments)},Replace:function(e){return y.apply(this,arguments)}},w={color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},S={color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};function k(e){return Object(o.jsx)("p",{style:S,children:e})}function A(e){return Object(o.jsx)("p",{style:w,children:e})}var D={Display:function(e){return"success"===e.type?k(e.msg):A(e.msg)},Success:k,Error:A};var C=function(){var e={type:"success",msg:""},t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],b=Object(a.useState)(""),f=Object(i.a)(b,2),p=f[0],j=f[1],h=Object(a.useState)(e),m=Object(i.a)(h,2),O=m[0],x=m[1];return""!==O.msg&&setTimeout((function(){x(e)}),2e3),Object(a.useEffect)((function(){g.All().then((function(e){return c(e)}))}),[]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(d,{update:function(e){return j(e)}}),Object(o.jsx)("h3",{children:"Add a new number"}),""!==O.msg?D.Display(O):"",Object(o.jsx)(s,{update:function(e){var t=r.find((function(t){return t.name===e.name}));if(!t)return g.Add(e).then((function(){return c([].concat(Object(u.a)(r),[e]))})).catch((function(){return x({type:"error",msg:"Server out of sync, reloading"})})),x({type:"success",msg:"Added "+e.name+" succesfully"}),void g.All().then((function(e){return c(e)}));if(window.confirm(e.name+" already exists, replace the old number?")){var n=t;n.number=e.number,g.Replace(t).then((function(){c(r.map((function(e){return e.id!==n.id?e:n}))),x({type:"success",msg:"Modified "+e.name+" succesfully"})})).catch((function(){x({type:"error",msg:"Information of "+e.name+" has already been removed"}),g.All().then((function(e){return c(e)}))}))}},persons:r,setNotif:x}),Object(o.jsx)("h3",{children:"Numbers"}),Object(o.jsx)(l,{numbers:r,search:p,del:function(e){var t;window.confirm("Delete "+(null===(t=r.find((function(t){return t.id===e.id})))||void 0===t?void 0:t.name))&&g.Delete(e.id).then((function(){return c(r.filter((function(t){return t.id!==e.id})))})).catch((function(){x({type:"error",msg:"Information of "+e.name+" has already been removed"}),g.All().then((function(e){return c(e)}))}))}})]})};n(44);c.a.render(Object(o.jsx)(C,{}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.58f91b3f.chunk.js.map