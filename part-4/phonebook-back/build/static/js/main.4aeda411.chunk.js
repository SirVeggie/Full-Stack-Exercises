(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(18),c=n.n(r),u=n(19),i=n(3),a=n(1),s=n(0);var o=function(e){var t=e.update,n=e.persons,r=e.setNotif,c=Object(a.useState)(""),u=Object(i.a)(c,2),o=u[0],d=u[1],l=Object(a.useState)(""),b=Object(i.a)(l,2),p=b[0],f=b[1];return Object(s.jsx)("div",{children:Object(s.jsx)("form",{onSubmit:function(e){e.preventDefault();var c={id:"",name:o,number:p};(function(e,t,n){if(""===e.name||""===e.number)return n({type:"error",msg:"Blanks are not allowed"}),!1;if(t.find((function(t){return t.number===e.number})))return n({type:"error",msg:"Number '".concat(e.number,"' already exists in the phonebook")}),!1;return!0})(c,n,r)&&t(c),d(""),f("")},children:Object(s.jsx)("table",{children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"Name"}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{value:o,onChange:function(e){return d(e.target.value)}})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"Number"}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{value:p,onChange:function(e){return f(e.target.value)}})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{}),Object(s.jsx)("td",{align:"right",children:Object(s.jsx)("button",{type:"submit",children:"Add"})})]})]})})})})};var d=function(e){var t=e.update,n=Object(a.useState)(""),r=Object(i.a)(n,2),c=r[0],u=r[1];return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(c),u("")},children:["Search by name ",Object(s.jsx)("input",{value:c,onChange:function(e){return u(e.target.value)}}),Object(s.jsx)("button",{type:"submit",children:"Search"})]})})};var l=function(e){var t=e.persons,n=e.search,r=e.del;return Object(s.jsx)("div",{children:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(s.jsxs)("p",{style:{margin:0},children:[e.name," ",e.number," ",Object(s.jsx)("button",{onClick:function(){return r(e)},children:"delete"})]},e.name)}))})},b=n(4),p=n.n(b),f=n(6),j=n(7),h=n.n(j),m="/api/persons";function O(){return(O=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.post(m,t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.delete(m+"/"+t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.get(m).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.put(m+"/"+t.id,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v={Add:function(e){return O.apply(this,arguments)},Delete:function(e){return x.apply(this,arguments)},All:function(){return g.apply(this,arguments)},Replace:function(e){return y.apply(this,arguments)}},w={color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},S={color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};function k(e){return Object(s.jsx)("p",{style:S,children:e})}function A(e){return Object(s.jsx)("p",{style:w,children:e})}var D={Display:function(e){return"success"===e.type?k(e.msg):A(e.msg)},Success:k,Error:A};var C=function(){var e={type:"success",msg:""},t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],b=Object(a.useState)(""),p=Object(i.a)(b,2),f=p[0],j=p[1],h=Object(a.useState)(e),m=Object(i.a)(h,2),O=m[0],x=m[1];return""!==O.msg&&setTimeout((function(){x(e)}),5e3),Object(a.useEffect)((function(){v.All().then((function(e){return c(e)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(d,{update:function(e){return j(e)}}),Object(s.jsx)("h3",{children:"Add a new number"}),""!==O.msg?D.Display(O):"",Object(s.jsx)(o,{update:function(e){var t=r.find((function(t){return t.name===e.name}));if(t){if(window.confirm(e.name+" already exists, replace the old number?")){var n=t;n.number=e.number,v.Replace(t).then((function(){c(r.map((function(e){return e.id!==n.id?e:n}))),x({type:"success",msg:"Modified "+e.name+" succesfully"})})).catch((function(e){x({type:"error",msg:e.toString()}),v.All().then((function(e){return c(e)}))}))}}else v.Add(e).then((function(t){c([].concat(Object(u.a)(r),[t])),x({type:"success",msg:"Added "+e.name+" succesfully"}),v.All().then((function(e){return c(e)}))})).catch((function(e){x({type:"error",msg:e.response.data}),console.log(e.response.data)}))},persons:r,setNotif:x}),Object(s.jsx)("h3",{children:"Numbers"}),Object(s.jsx)(l,{persons:r,search:f,del:function(e){var t;window.confirm("Delete "+(null===(t=r.find((function(t){return t.id===e.id})))||void 0===t?void 0:t.name))&&v.Delete(e.id).then((function(){return c(r.filter((function(t){return t.id!==e.id})))})).catch((function(e){x({type:"error",msg:e.toString()}),v.All().then((function(e){return c(e)}))}))}})]})};n(44);c.a.render(Object(s.jsx)(C,{}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.4aeda411.chunk.js.map